<launch>
  <arg name="tf_prefix" default="sick"/>
  <group ns = "$(arg tf_prefix)">
    <node name="static_tf0" pkg="tf" type="static_transform_publisher"
          args="0 0 0 0 0 0 $(arg tf_prefix)/world $(arg tf_prefix)/map 100" />

    <node name="static_tf1" pkg="tf" type="static_transform_publisher"
          args="0 0 0 0 0 0 $(arg tf_prefix)/map $(arg tf_prefix)/odom 100" />

    <node name="static_tf_nav350" pkg="tf" type="static_transform_publisher"
          args="0 0 0 0 0 0 $(arg tf_prefix)/base_link $(arg tf_prefix)/nav350 100" />


    <node name="sicknav350" pkg="sicktoolbox_wrapper" type="sicknav350" output="screen">
      <rosparam>
        ipaddress: 169.254.171.80 <!--Sick sensor ip address -->
        port: 2111
        mode: 4 <!--Operating Mode: 0=powerdown, 1=standby, 2=mapping, 3-=ladnmark, 4=navigation -->
        perform_mapping: false <!-- Perform mapping before going into mode -->
        publish_odom: true
        wait_command: 1
        mask_command: 2 <!--Mask: Landmarkmode 0=reflectors, 1=reflectors+scan; Nav mode 0=pose+reflectors, 1=pose+scan, 2=pose+reflectors+scan -->
        frame_id: "sick/odom"
        target_frame_id: "sick/base_link"
        mobile_base_frame_id: "sick/base_link"
        sick_frame_id: "sick/nav350"
        reflector_frame_id: "sick/nav350"
        reflector_child_frame_id: "sick/reflector"
        inverted: false
        resolution: 1.0
        start_angle: 0.0
        stop_angle: 360.0
      </rosparam>
    </node>

  </group>

      <node name="rviz" pkg="rviz" type="rviz" args="-d $(find sicktoolbox_wrapper)/nav350_localization.rviz"/>
</launch>
